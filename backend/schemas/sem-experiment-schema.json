{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://www.plasma-mds.org/schema/sem-experiment.json#",
    "title": "Scanning Electron Microscope (SEM) Experiment",
    "description": "Schema for a Scanning Electron Microscope (SEM) experiment",
    "type": "object",
    "properties": {
        "general": {
            "title": "General Information",
            "description": "General information",
            "type": "object",
            "required": ["objectives", "purpose", "deadline", "semDevice", "semOperator", "project", "projectLeaderName", "requesterName", "requesterEmail", "requesterPhone"],
            "properties": {
                "objectives": {
                    "title": "Objective(s)",
                    "description": "Describe the motivation, hypothesis, and reasons for the experiment.",
                    "type": "string"
                },
                "purpose": {
                    "title": "Purpose",
                    "description": "Specify how the results will be used.",
                    "type": "string",
                    "enum": ["", "Acquisitions (results will demonstrate the uniqueness of the analysis)","Industry project (results will be treated as highly confidential)", "Publication (results will be achieved in high quality)", "Others"]
                },
                "deadline": {
                            "title": "Deadline",
                            "description": "Specify the desired finish of the experiment.",
                            "type": "string"
                        },
                "semDevice": {
                            "title": "SEM Device",
                            "description": "Specify the required facility.",
                            "type": "string",
                            "enum": ["", "SEM Jeol JSM-7500F (Laboratory 1.59)", "FIB Scios 2 (Laboratory U.10)", "SEM Apreo 2 (Laboratory U.10a)"]
                        },
                "semOperator": {
                            "title": "SEM Operator",
                            "description": "Choose operator for the requested analysis.",
                            "type": "string"
                        },
                "project": {
                            "title": "Project",
                            "description": "Specify the project, e.g. name, number.",
                            "type": "string"

                },
                "projectLeaderName": {
                            "title": "Project Leader Name",
                            "description": "",
                            "type": "string"
                        },
                "requesterName": {
                            "title": "Requester Name",
                            "description": "",
                            "type": "string"
                        },
                "requesterEmail": {
                            "title": "Requester Email",
                            "description": "",
                            "type": "string"
                    },
                "requesterPhone": {
                        "title": "Requester Phone Number",
                        "description": "",
                        "type": "string"
                }
            }
        },
        "analysis": {
            "title": "Analysis",
            "description": "Analysis",
            "type": "object",
            "required": ["device"], 
            "properties": {
                "device": {
                    "title": "Device",
                    "description": "Device name and model",
                    "type": "string"
                },
                "conditions": {
                    "title": "Conditions",
                    "description": "Condition",
                    "type": "object",
                    "properties": {
                        "emitter": {
                            "title": "Emitter",
                            "description": "Last installation.",
                            "type": "string"
                        },
                        "extractionVoltage": {
                            "title": "Extraction Voltage [V]",
                            "description": "Extraction voltage",
                            "type": "number"
                        },
                        "sip1Pressure": {
                            "title": "SIP 1 Pressure [Pa]",
                            "description": "SIP 1 Pressure",
                            "type": "number"
                        },
                        "sip2Pressure": {
                            "title": "SIP 2 Pressure [Pa]",
                            "description": "SIP 2 Pressure",
                            "type": "number"
                        },
                        "chamberPressure": {
                            "title": "Chamber Pressure [Pa]",
                            "description": "Chamber Pressure",
                            "type": "number"
                        }
                    }
                },
                "procedure": {
                    "title": "Procedure",
                    "description": "Procedure description",
                    "type": "object",
                    "properties": {
                        "detectors": {
                            "title": "Detectors",
                            "description": "Insert applied detectors in the experiment: in-lens SE, lower SE, LABE, STEM, EDX.",
                            "type": "string"
                        },
                        "colorCoding": {
                            "title": "Color Coding",
                            "description": "Insert colors applied for the imaging if different images are mixed in one: red for A, green for B.",
                            "type": "string"
                        },
                        "workingDistance": {
                            "title": "Working Distance [mm]",
                            "description": "Range of WD in the experiment in mm",
                            "type": "number"
                        },
                        "accelerationVoltage": {
                            "title": "Acceleration Voltage [kV]",
                            "description": "Acceleration Voltage",
                            "type": "number"
                        },
                        "magnifications": {
                            "title": "Magnifications",
                            "description": "Maximum magnification applied",
                            "type": "string"
                        }
                    }
                }
            }
        },
        "sample": {
            "title": "Sample",
            "description": "Please add samples according to its priority (e.g., first sample is the first priority).",
            "type": "array",
            "items": {
                "type": "object",
                "required": ["sampleId", "sampleSafety", "chemicalComposition", "geometry", "sampleProperties", "imaging"],
                "properties": {
                    "exampleImage":{
                        "title": "Example Image",
                        "description": "Example of how the \"desired\" result image should look like for this sample. Accepted file types: [\".jpg\",\".png\"]",
                        "contentEncoding": "base64",
                        "type":"string"
                        },
                    "sampleId": {
                        "title": "Sample ID",
                        "description": "Sample ID [YYMMDD-XXXX]. Maximum of 20 characters.",
                        "type": "string"
                        },
                    "sampleSafety" : {
                        "title": "Safety Level",
                        "description": "(Further description of this field will be specified soon)",
                        "type": "string",
                        "enum": ["","1 (no risk)", "2 (gloves and respiratory protection requested)","3 (hazardous material, detailed specification required)"]
                        },
                    "chemicalComposition":{
                        "title": "Chemical Composition",
                        "description": "List of chemical elements (symbols) that make up the sample (e.g., Ar, N, O, C).",
                        "type": "string"
                        },
                    "geometry":{
                        "title":"Geometry",
                        "description": "Sample geometry (width x length x height/thickness) in mm.",
                        "type": "string"
                        },
                    "sampleProperties":{
                        "title" : "Properties",
                        "description": "Properties of the sample.",
                        "type": "string" 
                        },
                    "imaging": {
                        "title": "Imaging",
                        "description": "Specification of desired imaging parameters, e.g., zoom, image size, magnification.",
                        "type": "string"
                    },
                    "notes": {
                        "title": "Notes",
                        "description": "Manufacturing details, pervious analysis, other remarks.",
                        "type": "string"
                        }
                    }
                },
            "minItems": 1,
            "maxItems": 8,
            "uniqueItems": true
        }
    }
}